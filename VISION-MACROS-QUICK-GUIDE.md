# Vision-Enhanced Macros å¿«é€ŸæŒ‡å— ğŸš€

## TL;DR (å¤ªé•·ä¸çœ‹ç‰ˆ)

âœ… **Macros ç¾åœ¨å¯ä»¥"çœ‹åˆ°"ç¶²é äº†ï¼**

- æ‰€æœ‰ macros è‡ªå‹•ç²å¾—è¦–è¦ºèƒ½åŠ›
- é é¢æœ‰åœ–è¡¨/åœ–ç‰‡æ™‚è‡ªå‹•ä½¿ç”¨è¦–è¦ºåˆ†æ
- ç´”æ–‡å­—é é¢ä¿æŒå¿«é€Ÿ
- æ–°å¢ 3 å€‹è¦–è¦ºå°ˆç”¨ macros

## å¿«é€Ÿé–‹å§‹

### 1. æ¸¬è©¦æ¨™æº– Macros (è‡ªå‹•è¦–è¦ºå¢å¼·)

**åœ¨ç´”æ–‡å­—é é¢** (ä¾‹å¦‚ Wikipedia):
```
1. æ‰“é–‹ CPO TARS â†’ Macros tab
2. é»æ“Š "ğŸ“ Summarize"
3. å¿«é€Ÿå®Œæˆ (~1-2ç§’)
4. ä½¿ç”¨ TEXT mode
```

**åœ¨å¸¶åœ–è¡¨çš„é é¢** (ä¾‹å¦‚ Google Analytics):
```
1. æ‰“é–‹å¸¶æœ‰åœ–è¡¨çš„é é¢
2. é»æ“Š "ğŸ“ Summarize"
3. è‡ªå‹•æª¢æ¸¬åˆ°è¦–è¦ºå…§å®¹
4. ä½¿ç”¨ VISION mode (~2-3ç§’)
5. ç¸½çµåŒ…å«åœ–è¡¨æ•¸æ“šï¼âœ¨
```

### 2. æ¸¬è©¦è¦–è¦ºå°ˆç”¨ Macros

åœ¨ Macros tab å‘ä¸‹æ»¾å‹•ï¼Œä½ æœƒçœ‹åˆ° "ğŸ‘ï¸ Vision Analysis" å€å¡Š:

- **ğŸ“ Vision Summarize** - ç¸½çµåŒ…å«æ‰€æœ‰è¦–è¦ºå…ƒç´ 
- **ğŸ–¼ï¸ Describe Visuals** - æè¿°æ‰€æœ‰åœ–ç‰‡å’Œåœ–è¡¨
- **ğŸ“Š Extract Chart Data** - æå–åœ–è¡¨ä¸­çš„æ•¸æ“š

é€™äº› macros **ç¸½æ˜¯ä½¿ç”¨è¦–è¦ºåˆ†æ**ï¼Œå³ä½¿åœ¨ç´”æ–‡å­—é é¢ã€‚

## ä½¿ç”¨å ´æ™¯

### âœ… é©åˆä½¿ç”¨è¦–è¦º Macros çš„é é¢:

1. **æ•¸æ“šå„€è¡¨æ¿**
   - Google Analytics
   - ä»»ä½•åŒ…å«åœ–è¡¨çš„é é¢
   - ä½¿ç”¨ "ğŸ“Š Extract Chart Data"

2. **æŠ€è¡“æ–‡æª”**
   - åŒ…å«æ¶æ§‹åœ–ã€æµç¨‹åœ–
   - UML åœ–ã€ç³»çµ±è¨­è¨ˆåœ–
   - ä½¿ç”¨ "ğŸ’¡ Explain" æˆ– "ğŸ“ Vision Summarize"

3. **ç”¢å“é é¢**
   - æœ‰ç”¢å“åœ–ç‰‡
   - åŠŸèƒ½æˆªåœ–
   - ä½¿ç”¨ "ğŸ–¼ï¸ Describe Visuals"

4. **æ–°è/æ–‡ç« **
   - é…æœ‰åœ–ç‰‡ã€åœ–è¡¨
   - ä¿¡æ¯åœ–è¡¨
   - ä½¿ç”¨ "ğŸ“ Summarize" (è‡ªå‹•å¢å¼·)

5. **å ±å‘Šé é¢**
   - è²¡å‹™å ±å‘Š
   - ç ”ç©¶å ±å‘Š
   - ä½¿ç”¨ "ğŸ“ Vision Summarize"

### âš¡ ç´”æ–‡å­—é é¢ (ä¿æŒå¿«é€Ÿ):

1. Wikipedia æ–‡ç« 
2. Blog æ–‡ç«  (åªæœ‰æ–‡å­—)
3. è«–æ–‡ (arXiv)
4. ç´”æ–‡æª”é é¢

â†’ è‡ªå‹•ä½¿ç”¨ TEXT modeï¼Œä¿æŒå¿«é€Ÿï¼

## è¦–è¦ºèƒ½åŠ›ç¯„ä¾‹

### Before vs After

**å ´æ™¯: ç¸½çµåŒ…å«åœ–è¡¨çš„æŠ€è¡“æ–‡ç« **

âŒ **Before** (åªæœ‰æ–‡å­—):
```
"The article discusses API performance.
Figure 1 shows latency metrics.
Table 2 indicates throughput results."

â†’ çœ‹ä¸åˆ° Figure 1 å’Œ Table 2
â†’ ç¸½çµä¸å®Œæ•´
```

âœ… **After** (Vision-enhanced):
```
"The article analyzes API performance with comprehensive metrics:

Latency (Figure 1 - Line Chart):
- Baseline: 45ms average
- Optimized: 12ms average (73% improvement)
- 95th percentile: 28ms

Throughput (Table 2):
- HTTP/1.1: 1,250 req/s
- HTTP/2: 3,800 req/s (3x improvement)
- HTTP/3: 4,200 req/s (3.4x improvement)

Key insights: The optimization significantly reduced
latency while HTTP/3 provides the best throughput."
```

## è¦–è¦ºæŒ‡ç¤ºå™¨

**åœ¨ Macros UI ä¸­**:

- æ¨™æº– macros: "ğŸ‘ï¸ Vision-enhanced when page has visuals"
- Vision macros: "ğŸ” Always uses vision analysis"

**åœ¨ Console ä¸­** (é–‹ç™¼è€…å·¥å…·):
```
[MacrosTab] Using VISION mode for prompt: summarize
[MacrosTab] Using TEXT mode for prompt: grammar
```

## æ™ºèƒ½æª¢æ¸¬

ç³»çµ±æœƒè‡ªå‹•æª¢æ¸¬é€™äº›è¦–è¦ºå…§å®¹:

âœ… åœ–ç‰‡ (>50x50 px, è¶…é 2 å¼µ)
âœ… Canvas å…ƒç´  (åœ–è¡¨åº«å¦‚ Chart.js, D3.js)
âœ… SVG åœ–å½¢ (>100x100 px)
âœ… è¤‡é›œè¡¨æ ¼ (>5 rows æˆ– >4 cols)
âœ… iframe åµŒå…¥ (å½±ç‰‡, charts, embedded content)

âŒ æ’é™¤:
- å°åœ–ç¤º (<50px)
- Tracking pixels (1x1)
- ç´” logo é é¢

## æ€§èƒ½å’Œæˆæœ¬

### æ€§èƒ½

| æ¨¡å¼ | é é¢é¡å‹ | é€Ÿåº¦ | ç¯„ä¾‹ |
|------|----------|------|------|
| TEXT | ç´”æ–‡å­— | ~1-2s âš¡ | Wikipedia |
| VISION | è¦–è¦ºé é¢ | ~2.5-3.5s âœ… | Google Analytics |

### API æˆæœ¬

å‡è¨­ 100 æ¬¡ä½¿ç”¨:
- 70% ç´”æ–‡å­—é é¢ â†’ TEXT mode
- 30% è¦–è¦ºé é¢ â†’ VISION mode

**æˆæœ¬**: ~2.2x (ä½†ç²å¾—å®Œæ•´è¦–è¦ºç†è§£ï¼)

## å¸¸è¦‹å•é¡Œ

### Q: å¦‚ä½•çŸ¥é“ä½¿ç”¨äº†å“ªç¨®æ¨¡å¼ï¼Ÿ

**A:** æ‰“é–‹ç€è¦½å™¨ console (F12) æŸ¥çœ‹æ—¥èªŒ:
```
[MacrosTab] Using VISION mode for prompt: summarize
```

### Q: å¯ä»¥å¼·åˆ¶ä½¿ç”¨/ä¸ä½¿ç”¨è¦–è¦ºå—ï¼Ÿ

**A:** ç›®å‰:
- æ¨™æº– macros (Summarize, Explain ç­‰) - è‡ªå‹•æ™ºèƒ½æª¢æ¸¬
- Vision macros (Vision Summarize, Describe Visuals ç­‰) - ç¸½æ˜¯ä½¿ç”¨è¦–è¦º

æœªä¾†å¯èƒ½æ·»åŠ ç”¨æˆ¶è¨­ç½®ä¾†æ§åˆ¶ã€‚

### Q: è¦–è¦ºåˆ†ææœƒæ›´æ…¢å—ï¼Ÿ

**A:**
- ç´”æ–‡å­—é é¢: ä¸æœƒï¼Œä»ç„¶å¿«é€Ÿ (~1-2s)
- è¦–è¦ºé é¢: ç¨æ…¢ (~2.5-3.5s)ï¼Œä½†ç²å¾—å®Œæ•´ç†è§£
- æ™ºèƒ½æª¢æ¸¬ç¢ºä¿åªåœ¨å¿…è¦æ™‚ä½¿ç”¨

### Q: API æˆæœ¬æœƒå¢åŠ å¤šå°‘ï¼Ÿ

**A:** å¤§ç´„ 2-2.5xï¼Œä½†åªæœ‰åœ¨ä½¿ç”¨ vision mode æ™‚:
- Text mode: ~$0.001 per request
- Vision mode: ~$0.005 per request

ç³»çµ±æœƒæ™ºèƒ½å„ªåŒ–ï¼Œç´”æ–‡å­—é é¢ä¸å¢åŠ æˆæœ¬ã€‚

### Q: å“ªäº›é é¢æœƒä½¿ç”¨è¦–è¦ºåˆ†æï¼Ÿ

**A:** ç³»çµ±è‡ªå‹•æª¢æ¸¬åŒ…å«ä»¥ä¸‹å…§å®¹çš„é é¢:
- åœ–ç‰‡ (ç”¢å“é é¢, æ–°è)
- åœ–è¡¨ (å„€è¡¨æ¿, å ±å‘Š)
- SVG åœ–å½¢ (æŠ€è¡“æ–‡æª”)
- è¤‡é›œè¡¨æ ¼ (æ•¸æ“šé é¢)
- Canvas (åœ–è¡¨åº«)

### Q: å¦‚æœè¦–è¦ºåˆ†æå¤±æ•—æœƒæ€æ¨£ï¼Ÿ

**A:** è‡ªå‹•é™ç´šåˆ° TEXT mode:
```typescript
try {
    return await getEnhancedPageContext();
} catch (error) {
    // è‡ªå‹•é™ç´š
    return { type: 'text', text: await getTabSelection() };
}
```

ä¸æœƒä¸­æ–·åŠŸèƒ½ï¼

## æ¸¬è©¦æ¸…å–®

å»ºè­°æŒ‰é †åºæ¸¬è©¦:

- [ ] 1. ç´”æ–‡å­—é é¢ (Wikipedia) - "Summarize"
  - æ‡‰è©²å¿«é€Ÿ (~1-2s)
  - Console: "Using TEXT mode"

- [ ] 2. å¸¶åœ–ç‰‡çš„æ–°èæ–‡ç«  - "Summarize"
  - è‡ªå‹•æª¢æ¸¬è¦–è¦ºå…§å®¹
  - Console: "Using VISION mode"
  - ç¸½çµæåˆ°åœ–ç‰‡å…§å®¹

- [ ] 3. æ•¸æ“šå„€è¡¨æ¿ (Google Analytics) - "ğŸ“Š Extract Chart Data"
  - ä½¿ç”¨ Vision macro
  - æå–åœ–è¡¨æ•¸æ“šå’Œè¶¨å‹¢

- [ ] 4. æŠ€è¡“æ–‡æª” (æœ‰æ¶æ§‹åœ–) - "ğŸ’¡ Explain"
  - è‡ªå‹•ä½¿ç”¨ VISION mode
  - è§£é‡‹åƒè€ƒåœ–å½¢

- [ ] 5. "ğŸ–¼ï¸ Describe Visuals" åœ¨ä»»ä½•é é¢
  - æè¿°æ‰€æœ‰è¦–è¦ºå…ƒç´ 
  - å³ä½¿æ˜¯ç´”æ–‡å­—é é¢ä¹Ÿæœƒåˆ†æ

## ç›¸é—œæ–‡æª”

- `VISION-ENHANCED-MACROS.md` - å®Œæ•´è¨­è¨ˆæ–‡æª”
- `VISION-MACROS-IMPLEMENTATION-COMPLETE.md` - å¯¦æ–½è©³æƒ…
- `BROWSER-AGENT-USAGE.md` - Browser Agent ä½¿ç”¨æŒ‡å—
- `LLM-AGENT-BROWSER-INTERACTION.md` - æŠ€è¡“ç ”ç©¶

## æ•…éšœæ’é™¤

### å•é¡Œ: Macro ä¸€ç›´é¡¯ç¤º "Processing..."

**è§£æ±º**:
1. æª¢æŸ¥ Gemini API key æ˜¯å¦é…ç½® (Settings tab)
2. æª¢æŸ¥ console æ˜¯å¦æœ‰éŒ¯èª¤
3. å˜—è©¦ç°¡å–®é é¢ (Wikipedia)

### å•é¡Œ: çœ‹ä¸åˆ°è¦–è¦ºåˆ†æçµæœ

**æª¢æŸ¥**:
1. é é¢æ˜¯å¦çœŸçš„æœ‰è¦–è¦ºå…§å®¹?
2. Console é¡¯ç¤ºä½¿ç”¨å“ªç¨®æ¨¡å¼?
3. å˜—è©¦ä½¿ç”¨ Vision Summarize (å¼·åˆ¶ vision mode)

### å•é¡Œ: é€Ÿåº¦å¤ªæ…¢

**åŸå› å¯èƒ½**:
1. é é¢éå¸¸å¤§/è¤‡é›œ
2. ç¶²çµ¡å»¶é²
3. API éŸ¿æ‡‰æ…¢

**å„ªåŒ–**:
- åœ¨å°é é¢æ¸¬è©¦
- æª¢æŸ¥ç¶²çµ¡é€£æ¥
- è€ƒæ…®ä½¿ç”¨ TEXT-only macros å¦‚æœä¸éœ€è¦è¦–è¦º

## é–‹å§‹ä½¿ç”¨ï¼

1. æ‰“é–‹ CPO TARS extension
2. å‰å¾€ **Macros** tab
3. å˜—è©¦åœ¨ä¸åŒé¡å‹çš„é é¢ä½¿ç”¨ macros
4. æŸ¥çœ‹ "ğŸ‘ï¸ Vision Analysis" å€å¡Šçš„æ–°åŠŸèƒ½

**äº«å—æ›´å¼·å¤§çš„é é¢ç†è§£èƒ½åŠ›ï¼** ğŸ‰
